package hayride:ai@0.0.40;

interface agent {
    use context.{context};
    use types.{message};
    use model.{model};

    enum error-code {
        invoke-error,
        unknown
    }

    resource error {
        /// return the error code.
        code: func() -> error-code;
        /// errors can propagated with backend specific status through a string value.
        data: func() -> string;
    }

    resource agent {
        constructor(name: string, instruction: string);
        name: func() -> string;
        instruction: func() -> string;
        invoke: func(ctx: borrow<context>, model: borrow<model>) -> result<list<message>, error>;
    }
}
