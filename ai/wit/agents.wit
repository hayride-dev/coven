package hayride:ai@0.0.25;


interface types {
    use wasi:io/poll@0.2.0.{pollable};

    enum error-code {
        // caller module passed an invalid argument.
        invalid-argument,
        // missing capability
        missing-capability,
        // heneric Runtime Error.
        runtime-error,
        // unsupported operation.
        unknown
    }

    resource error {
        /// return the error code.
        code: func() -> error-code;
        /// errors can propagated with backend specific status through a string value.
        data: func() -> string;
    }

    resource future-result {
        subscribe: func() -> pollable;
        get: func() -> result<list<u8>, error>;
    }

    record tool {
      package-id: string,
      description: string
    }

    resource agent {
        constructor(name: string, description: string, capabilities: list<tool>);
        name: func() -> string;
        // return the description of the agent 
        description: func() -> string; 
        // list the capabilities of the agent
        capabilities: func() -> result<list<tool>,error>;
    }
}

interface agents {
    use types.{agent,error,tool};
    set: func(agent: agent) -> result<_,error>;
    get: func(name: string) -> result<agent,error>;
    // enhance the agent with the given component or capabilities 
    enhance: func(agent: agent, tools: list<tool>) -> result<_,error>; 
}

interface tools {
    use types.{tool,error,future-result};
    format: func(model: string, tool: tool) -> string;
    invoke: func(tool: tool, function: string, args: list<string>) -> result<future-result,error>;
}

