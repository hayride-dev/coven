package hayride:ai@0.0.24;


interface agent {
    use wasi:io/poll@0.2.0.{pollable};

    enum error-code {
        // caller module passed an invalid argument.
        invalid-argument,
        // missing capability
        missing-capability,
        // heneric Runtime Error.
        runtime-error,
        // unsupported operation.
        unknown
    }
    
    resource error {
        /// return the error code.
        code: func() -> error-code;
        /// errors can propagated with backend specific status through a string value.
        data: func() -> string;
    }

    resource future-result {
        subscribe: func() -> pollable;
        get: func() -> result<list<u8>, error>;
    }

    resource agent {
        constructor (description: string, components: list<string>);
        // return the description of the agent 
        description: func() -> string; 
        // enhance the agent with the given component or capabilities
        enhance: func(components: list<string>) -> result<_,error>; 
        // list the capabilities of the agent
        capabilities: func() -> result<list<string>,error>;
        // invoke a function in the given component or capability set
        invoke: func( component: string, function: string, args: list<string>) -> result<future-result,error>;
    }

    initialize: func() -> result<agent,error>;
}